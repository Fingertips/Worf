var WORF={VERSION:"0.1.0",font_face:function(){var a=arguments.length/2,b,c;while(a--)b=arguments[a*2],c=arguments[a*2+1],WORF._font_face(b,c);WORF.Caching.cleanup()},_font_face:function(a,b){var c=WORF.Caching.get(a);c?(c.push(b),WORF.define_font_face.apply(this,c)):WORF.Converter.woffToSfntAsBase64(a,function(c,d){WORF.define_font_face(d,c,b),WORF.Caching.set(a,d,c)})},define_font_face:function(a,b,c){var d=WORF.Converter.fontFaceDeclaration(a,b,c),e=document.createElement("style");e.innerHTML=d,document.head.appendChild(e)}};WORF.Converter={fontFaceDeclaration:function(a,b,c){return"@font-face {                                                                                         \n      src: url(//:) format('no404'), url(data:font/"+a+";charset=utf-8;base64,"+b+") format("+a+"); \n      "+c+"                                                                                                  \n    }"},load:function(a,b){var c=new XMLHttpRequest;c.overrideMimeType("text/plain; charset=x-user-defined"),c.onreadystatechange=function(){c.readyState==4&&b(c.responseText)},c.open("GET",a,!0),c.send(null)},fromUint16:function(a){return(a[0]<<8)+a[1]},fromUint32:function(a){return(a[0]<<24)+(a[1]<<16)+(a[2]<<8)+a[3]},toUint16:function(a){return[(a&65280)>>8,a&255]},toUint32:function(a){return[(a&4278190080)>>24,(a&16711680)>>16,(a&65280)>>8,a&255]},woffToSfntAsBase64:function(a,b){this.load(a,function(a){var c=WORF.Util.Base64._utf8_encode;WORF.Util.Base64._utf8_encode=function(a){return a};var d=WORF.Util.Base64.encode(WORF.Converter.woffToSfnt(a));WORF.Util.Base64._utf8_encode=c,b(d,WORF.Converter.woffFlavor(a))})},lowestPower:function(a){var b=a;b|=b>>1,b|=b>>2,b|=b>>4,b|=b>>8,b&=~(b>>1);return b},stringToByteArray:function(a){var b=0,c=[];while(b<a.length)c[b]=a.charCodeAt(b++)&255;return c},cleanup:function(a){return String.fromCharCode.apply(this,this.stringToByteArray(a))},woffFlavor:function(a){var b=this.fromUint32(this.stringToByteArray(a.slice(4,8)));switch(b){case 65536:return"truetype";case 1330926671:return"opentype";default:throw"Unknown font type"}},woffToSfnt:function(a){var b=[],c="",d={},e=this.fromUint16(this.stringToByteArray(a.slice(12,14))),f=this.lowestPower(e),g=this.stringToByteArray(a.slice(0,44));b=b.concat(g.slice(4,8)),b=b.concat(g.slice(12,14)),b=b.concat(this.toUint16(f*16)),b=b.concat(this.toUint16(Math.log(f)/Math.LN2)),b=b.concat(this.toUint16(e*16-f*16));var h=12+e*16,i,j,k,l,m,n=[],o;for(var p=0;p<e;p++){k=44+p*20,o=this.stringToByteArray(a.slice(k,k+20)),l=this.fromUint32(o.slice(12,16)),j=o.slice(0,4),i=this.fromUint32(j),d[i]={},d[i].rawTag=j,d[i].woffEntryOffset=k,d[i].checksum=o.slice(16,20),d[i].offset=h,d[i].length=l,n.push(i),m=Math.ceil(l/4)*4-l,h+=l+m;var q=this.fromUint32(o.slice(4,8)),r=this.fromUint32(o.slice(8,12));if(l>r){var s=(new WORF.Util.Unzip(this.stringToByteArray(a.slice(q,q+r)))).unzip();c+=s[0][0]}else c+=this.cleanup(a.slice(q,q+r));for(var t=0;t<m;t++)c+=String.fromCharCode(0)}var u;n=n.sort();for(var p=0;p<n.length;p++)u=d[n[p]],b=b.concat(u.rawTag),b=b.concat(u.checksum),b=b.concat(this.toUint32(u.offset)),b=b.concat(this.toUint32(u.length));return String.fromCharCode.apply(this,b)+c}},WORF.Caching={baseKey:function(a){return"worf."+a},get:function(a){var b=WORF.Caching.baseKey(a);if(localStorage[b+".timestamp"])return[localStorage[b+".flavor"],localStorage[b+".base64"]]},set:function(a,b,c){var d=WORF.Caching.baseKey(a);localStorage[d+".timestamp"]=(new Date).getTime(),localStorage[d+".flavor"]=b,localStorage[d+".base64"]=c},maxAge:864e5,cleanup:function(){var a,b,c,d;for(key in localStorage)if(a=key.match(/^worf\.(.*)\.timestamp$/))b=(new Date).getTime(),c=parseInt(localStorage[key]),b-c>WORF.Caching.maxAge&&(d="worf."+a[1],localStorage.removeItem(d+".timestamp"),localStorage.removeItem(d+".flavor"),localStorage.removeItem(d+".base64"))}},WORF.Util={},WORF.Util.Unzip=function(a){function $(){var a,b=[],c,d,f,g,h;e&8&&(b[0]=B(),b[1]=B(),b[2]=B(),b[3]=B(),b[0]==parseInt("50",16)&&b[1]==parseInt("4b",16)&&b[2]==parseInt("07",16)&&b[3]==parseInt("08",16)?(a=B(),a|=B()<<8,a|=B()<<16,a|=B()<<24):a=b[0]|b[1]<<8|b[2]<<16|b[3]<<24,c=B(),c|=B()<<8,c|=B()<<16,c|=B()<<24,d=B(),d|=B()<<8,d|=B()<<16,d|=B()<<24),k&&Z(),b[0]=B();if(b[0]!=8)return 0;e=B(),B(),B(),B(),B(),B(),f=B();if(e&4){b[0]=B(),b[2]=B(),Q=b[0]+256*b[1];for(g=0;g<Q;g++)B()}if(e&8){g=0,z=[];while(h=B()){if(h=="7"||h==":")g=0;g<y-1&&(z[g++]=h)}}if(e&16)while(h=B()){}e&2&&(B(),B()),Y(),a=B(),a|=B()<<8,a|=B()<<16,a|=B()<<24,d=B(),d|=B()<<8,d|=B()<<16,d|=B()<<24,k&&Z()}function Z(){b=[];var a=[];k=!1,a[0]=B(),a[1]=B(),a[0]==parseInt("78",16)&&a[1]==parseInt("da",16)&&(Y(),g[f]=Array(2),g[f][0]=b.join(""),g[f][1]="geonext.gxt",f++),a[0]==parseInt("1f",16)&&a[1]==parseInt("8b",16)&&($(),g[f]=Array(2),g[f][0]=b.join(""),g[f][1]="file",f++);if(a[0]==parseInt("50",16)&&a[1]==parseInt("4b",16)){k=!0,a[2]=B(),a[3]=B();if(a[2]==parseInt("3",16)&&a[3]==parseInt("4",16)){a[0]=B(),a[1]=B(),e=B(),e|=B()<<8;var c=B();c|=B()<<8,B(),B(),B(),B();var d=B();d|=B()<<8,d|=B()<<16,d|=B()<<24;var h=B();h|=B()<<8,h|=B()<<16,h|=B()<<24;var i=B();i|=B()<<8,i|=B()<<16,i|=B()<<24;var j=B();j|=B()<<8;var n=B();n|=B()<<8,p=0,z=[];while(j--){var o=B();o=="/"|o==":"?p=0:p<y-1&&(z[p++]=String.fromCharCode(o))}A||(A=z);var p=0;while(p<n)o=B(),p++;l=4294967295,m=0,c==8&&(Y(),g[f]=Array(2),g[f][0]=b.join(""),g[f][1]=z.join(""),f++),$()}}}function Y(){var a,b,c,d,e;do{a=D(),c=E(2);if(c==0){var f,g;C(),f=B(),f|=B()<<8,g=B(),g|=B()<<8,(f^~g)&65535&&console.log("BlockLen checksum mismatch");while(f--)b=B(),G(b)}else if(c==1){var h;while(1){h=n[E(7)]>>1,h>23?(h=h<<1|D(),h>199?(h-=128,h=h<<1|D()):(h-=48,h>143&&(h=h+136))):h+=256;if(h<256)G(h);else{if(h==256)break;var e,k;h-=257,e=E(p[h])+o[h],h=n[E(5)]>>3,r[h]>8?(k=E(8),k|=E(r[h]-8)<<8):k=E(r[h]),k+=q[h];for(h=0;h<e;h++){var b=i[j-k&32767];G(b)}}}}else if(c==2){var h,l,m,t,u,v=Array(288+32);m=257+E(5),t=1+E(5),u=4+E(4);for(h=0;h<19;h++)v[h]=0;for(h=0;h<u;h++)v[s[h]]=E(3);e=K.length;for(d=0;d<e;d++)K[d]=new H;if(W(K,19,v,0)){F();return 1}l=m+t,d=0;var w=-1;while(d<l){w++,h=X(K);if(h<16)v[d++]=h;else if(h==16){var x;h=3+E(2);if(d+h>l){F();return 1}x=d?v[d-1]:0;while(h--)v[d++]=x}else{h==17?h=3+E(3):h=11+E(7);if(d+h>l){F();return 1}while(h--)v[d++]=0}}e=J.length;for(d=0;d<e;d++)J[d]=new H;if(W(J,m,v,0)){F();return 1}e=J.length;for(d=0;d<e;d++)K[d]=new H;var y=[];for(d=m;d<v.length;d++)y[d-m]=v[d];if(W(K,t,y,0)){F();return 1}while(1){h=X(J);if(h<256)G(h);else{var e,k;h-=256;if(h==0)break;h--,e=E(p[h])+o[h],h=X(K),r[h]>8?(k=E(8),k|=E(r[h]-8)<<8):k=E(r[h]),k+=q[h];while(e--){var b=i[j-k&32767];G(b)}}}}}while(!a);F(),C();return 0}function X(a){var b,c,d=0,e=a[d],f;while(1){f=D();if(f){if(!(e.b1&32768))return e.b1;e=e.jump,b=a.length;for(c=0;c<b;c++)if(a[c]===e){d=c;break}}else{if(!(e.b0&32768))return e.b0;d++,e=a[d]}}return-1}function W(a,b,c,d){var e;M=a,L=0,S=c,T=b;for(e=0;e<17;e++)R[e]=0;Q=0;if(V())return-1;return 0}function V(){var a=M[L],b;if(Q==17)return-1;L++,Q++,b=U();if(b<0){a.b0=32768;if(V())return-1}else a.b0=b;b=U();if(b<0){a.b1=32768,a.jump=M[L],a.jumppos=L;if(V())return-1}else a.b1=b,a.jump=null;Q--;return 0}function U(){while(1){if(R[Q]>=T)return-1;if(S[R[Q]]==Q)return R[Q]++;R[Q]++}}function H(){this.b0=0,this.b1=0,this.jump=null,this.jumppos=-1}function G(a){m++,i[j++]=a,b.push(String.fromCharCode(a)),j==32768&&(j=0)}function F(){j=0}function E(a){var b=0,c=a;while(c--)b=b<<1|D();a&&(b=n[b]>>8-a);return b}function D(){var a;x++,a=w&1,w>>=1,w==0&&(w=B(),a=w&1,w=w>>1|128);return a}function C(){w=1}function B(){x+=8;return u<t.length?t[u++]:-1}var b=[],c="",d=!1,e,f=0,g=[],h,i=Array(32768),j=0,k=!1,l,m,n=[0,128,64,192,32,160,96,224,16,144,80,208,48,176,112,240,8,136,72,200,40,168,104,232,24,152,88,216,56,184,120,248,4,132,68,196,36,164,100,228,20,148,84,212,52,180,116,244,12,140,76,204,44,172,108,236,28,156,92,220,60,188,124,252,2,130,66,194,34,162,98,226,18,146,82,210,50,178,114,242,10,138,74,202,42,170,106,234,26,154,90,218,58,186,122,250,6,134,70,198,38,166,102,230,22,150,86,214,54,182,118,246,14,142,78,206,46,174,110,238,30,158,94,222,62,190,126,254,1,129,65,193,33,161,97,225,17,145,81,209,49,177,113,241,9,137,73,201,41,169,105,233,25,153,89,217,57,185,121,249,5,133,69,197,37,165,101,229,21,149,85,213,53,181,117,245,13,141,77,205,45,173,109,237,29,157,93,221,61,189,125,253,3,131,67,195,35,163,99,227,19,147,83,211,51,179,115,243,11,139,75,203,43,171,107,235,27,155,91,219,59,187,123,251,7,135,71,199,39,167,103,231,23,151,87,215,55,183,119,247,15,143,79,207,47,175,111,239,31,159,95,223,63,191,127,255],o=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],p=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,99,99],q=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577],r=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],s=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],t=a,u=0,v=0,w=1,x=0,y=256,z=[],A,I=288,J=Array(I),K=Array(32),L=0,M=null,N=null,O=Array(64),P=Array(64),Q=0,R=Array(17);R[0]=0;var S,T;WORF.Util.Unzip.prototype.unzip=function(){Z();return g}},WORF.Util.Base64={_keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",encode:function(a){var b=[],c,d,e,f,g,h,i,j=0;while(j<a.length)c=a.charCodeAt(j++),d=a.charCodeAt(j++),e=a.charCodeAt(j++),f=c>>2,g=(c&3)<<4|d>>4,h=(d&15)<<2|e>>6,i=e&63,isNaN(d)?h=i=64:isNaN(e)&&(i=64),b.push([this._keyStr.charAt(f),this._keyStr.charAt(g),this._keyStr.charAt(h),this._keyStr.charAt(i)].join(""));return b.join("")}}